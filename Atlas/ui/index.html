<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATLAS | Deep Inspector Panel</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&family=Inter:wght@300;400;600;800&display=swap"
        rel="stylesheet">
    <!-- Atlas Main Stylesheet -->
    <link rel="stylesheet" href="css/atlas-main.css">
    <!-- Atlas Utility Classes (Phase 2) -->
    <link rel="stylesheet" href="css/atlas-utilities.css">
    <!-- Atlas Component Styles (Phase 3 & 4) -->
    <link rel="stylesheet" href="css/atlas-components.css">
    <!-- Atlas Footer Styles (Phase 6) -->
    <link rel="stylesheet" href="css/atlas-footer.css">

</head>

<body>


    <!-- ========== PHASE 3: MODERN HEADER ========== -->
    <div class="header">
        <!-- Left: Hamburger + Brand -->
        <div class="header-left">
            <button class="hamburger-btn" onclick="toggleSidebar()" title="Toggle Sidebar">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <div class="brand">
                <span class="brand-icon">âš¡</span>
                <span class="brand-text">ATLAS</span>
                <span class="version-badge">v7.0</span>
            </div>
        </div>

        <!-- Center: Engine Status Card -->
        <div class="header-center">
            <div class="engine-status-card">
                <div class="status-indicator">
                    <div class="status-dot" id="statusDot"></div>
                    <span id="statusLabel">ENGINE STANDBY</span>
                </div>
                <div class="quick-stats">
                    <span class="stat">âš¡ <span id="latencyStat">--</span>ms</span>
                    <span class="stat">ğŸ“Š <span id="requestStat">--</span></span>
                </div>
            </div>
        </div>

        <!-- Right: Actions -->
        <div class="header-right">
            <!-- Arena Link -->
            <a href="/arena" class="icon-btn arena-link-icon" title="Arena">
                ğŸŸï¸
            </a>

            <!-- Notification Bell -->
            <button class="icon-btn" onclick="toggleNotifications()" title="Notifications">
                <span class="icon">ğŸ””</span>
                <span class="badge" id="notifCount" style="display:none;">0</span>
            </button>

            <!-- User Menu -->
            <div class="user-menu-trigger" id="authArea">
                <!-- Auth content will be injected here -->
            </div>

            <!-- Settings -->
            <button class="icon-btn" onclick="alert('Settings panel coming soon!')" title="Settings">
                âš™ï¸
            </button>
        </div>
    </div>

    <!-- ========== PHASE 4: MAIN CONTAINER WITH SIDEBAR ========== -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Backend Health Monitor -->
            <div class="backend-monitor glass-light p-md rounded-lg mb-md">
                <div class="section-header">
                    <span class="section-title">ğŸ–¥ï¸ BACKEND HEALTH</span>
                </div>
                <div class="monitor-stats">
                    <div class="monitor-stat">
                        <span class="stat-label">ğŸŸ¢ Status</span>
                        <span class="stat-value">ONLINE</span>
                    </div>
                    <div class="monitor-stat">
                        <span class="stat-label">âš¡ Latency</span>
                        <span class="stat-value" id="sidebarLatency">--ms</span>
                    </div>
                    <div class="monitor-stat">
                        <span class="stat-label">ğŸ“Š Requests</span>
                        <span class="stat-value" id="sidebarRequests">--</span>
                    </div>
                </div>
            </div>

            <!-- Session Manager (replacing dropdown) -->
            <div class="session-manager glass-light rounded-lg p-md mb-md">
                <div class="section-header">
                    <span class="section-title">ğŸ’¬ SOHBETLER</span>
                    <button class="btn-new-session" onclick="newChat()">
                        <span class="icon">+</span> Yeni
                    </button>
                </div>

                <div class="session-list" id="sessionList">
                    <!-- Session cards will be dynamically injected here -->
                </div>

                <button class="btn-clear-all" onclick="clearAllChats()">
                    ğŸ§¹ TÃ¼mÃ¼nÃ¼ Temizle
                </button>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions glass-light rounded-lg p-md">
                <div class="section-header">
                    <span class="section-title">âš¡ HIZLI ERÄ°ÅÄ°M</span>
                </div>
                <div class="quick-action-item" onclick="window.location.href='/arena'">
                    <span class="quick-action-icon">ğŸŸï¸</span>
                    <span>Arena</span>
                </div>
                <div class="quick-action-item" onclick="alert('Analytics coming soon!')">
                    <span class="quick-action-icon">ğŸ“Š</span>
                    <span>Analytics</span>
                </div>
            </div>
        </aside>

        <!-- Chat View (Center) -->
        <div class="locked-overlay" id="lockedOverlay">
            <div style="text-align:center;">
                <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ”’</div>
                SYSTEM LOCKED<br>GeleceÄŸi GÃ¶zlemlemek Ä°Ã§in GiriÅŸ YapÄ±n
            </div>
        </div>
    </div>
    </div>

    <div class="login-modal" id="loginModal">
        <div class="login-card">
            <h2>ATLAS GiriÅŸi</h2>
            <input type="text" id="loginUser" class="login-input" placeholder="KullanÄ±cÄ± AdÄ±">
            <input type="password" id="loginPass" class="login-input" placeholder="Åifre">
            <button class="login-submit" onclick="handleLogin()">GiriÅŸ Yap</button>
            <div id="loginError" style="color:var(--danger); font-size:0.75rem; margin-top:10px; text-align:center;">
            </div>
        </div>
    </div>

    <div class="chat-view" id="chatView">
        <div class="message-wrapper ai">
            <div class="bubble">
                <h3>Sisteme HoÅŸ Geldin, Observer.</h3>
                <p>ATLAS motoru tÃ¼m katmanlarÄ±yla aktif. Analiz raporlarÄ±nÄ± gÃ¶rmek iÃ§in mesajlarÄ±n altÄ±ndaki
                    <strong>[RDR]</strong> butonlarÄ±nÄ± kullanabilirsin.
                </p>
            </div>
        </div>
    </div>

    <div class="notif-panel" id="notifPanel">
        <div class="notif-header">
            PROAKTÄ°F UYARILAR
            <span style="cursor:pointer" onclick="toggleNotifications()">Ã—</span>
        </div>
        <div id="notifList">
            <p style="padding: 20px; color: var(--text-dim); font-size: 0.8rem; text-align:center;">Yeni bildirim
                bulunmuyor.</p>
        </div>
    </div>
    </div>


    <!-- ========== PHASE 6: MODERN FOOTER & PERSONA ENHANCEMENT ========== -->
    <div class="footer">
        <!-- Persona Pills -->
        <div class="persona-pills-container">
            <span class="persona-label">Persona:</span>
            <div class="persona-pills" id="personaPills">
                <button class="persona-pill active" data-persona="standard" onclick="selectPersona('standard')">
                    <span class="pill-icon">âš¡</span> Standart
                </button>
                <button class="persona-pill" data-persona="professional" onclick="selectPersona('professional')">
                    <span class="pill-icon">ğŸ’¼</span> Kurumsal
                </button>
                <button class="persona-pill" data-persona="kanka" onclick="selectPersona('kanka')">
                    <span class="pill-icon">ğŸ¤</span> Kanka
                </button>
                <button class="persona-pill" data-persona="creative" onclick="selectPersona('creative')">
                    <span class="pill-icon">ğŸ¨</span> SanatÃ§Ä±
                </button>
                <button class="persona-pill" data-persona="concise" onclick="selectPersona('concise')">
                    <span class="pill-icon">ğŸ¯</span> Net & Ã–z
                </button>
                <!-- More personas in dropdown -->
                <div class="persona-more-dropdown">
                    <button class="persona-pill more-btn" onclick="togglePersonaDropdown()">
                        <span class="pill-icon">â‹¯</span> Daha Fazla
                    </button>
                    <div class="persona-dropdown-menu" id="personaDropdownMenu">
                        <button class="dropdown-item" data-persona="sincere" onclick="selectPersona('sincere')">
                            <span class="pill-icon">ğŸ’™</span> Ä°Ã§ten Dost
                        </button>
                        <button class="dropdown-item" data-persona="detailed" onclick="selectPersona('detailed')">
                            <span class="pill-icon">ğŸ“š</span> EÄŸitmen
                        </button>
                        <button class="dropdown-item" data-persona="girlfriend" onclick="selectPersona('girlfriend')">
                            <span class="pill-icon">ğŸ’•</span> Sevgili
                        </button>
                        <button class="dropdown-item" data-persona="friendly" onclick="selectPersona('friendly')">
                            <span class="pill-icon">ğŸ˜Š</span> YardÄ±msever
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Input Wrapper -->
        <div class="input-wrapper glass-strong">
            <!-- Hidden file input -->
            <input type="file" id="fileInput" multiple accept="image/jpeg,image/png,image/webp,image/gif"
                style="display: none;">

            <!-- File Upload Button -->
            <button class="input-action-btn" onclick="document.getElementById('fileInput').click()"
                title="Upload Image">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48">
                    </path>
                </svg>
            </button>

            <!-- Main Text Input -->
            <input type="text" id="userInput" class="main-input" placeholder="Sisteme bir komut ver..."
                autocomplete="off">

            <!-- Send Button -->
            <button class="send-btn-enhanced" id="sendBtn" onclick="handleSend()" title="Send Message">
                <svg class="send-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
                <span class="send-text">GÃ¶nder</span>
            </button>
        </div>

        <!-- Hidden Legacy Select for Compatibility -->
        <select id="personaSelect" style="display: none;">
            <option value="standard">Standart</option>
            <option value="professional">Kurumsal / Ciddi</option>
            <option value="sincere">Ä°Ã§ten Dost</option>
            <option value="kanka">Kanka</option>
            <option value="creative">SanatÃ§Ä± / Åair</option>
            <option value="concise">Net & Ã–z (Uzman)</option>
            <option value="detailed">EÄŸitmen / Ã–ÄŸretmen</option>
            <option value="girlfriend">Sevgili</option>
            <option value="friendly">YardÄ±msever</option>
        </select>
    </div>

    <!-- Atlas Main Script -->
    <script src="js/atlas-main.js"></script>
</body>

</html>